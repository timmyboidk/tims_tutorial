const fs = require('fs');
const path = require('path');

const dataDir = path.join(__dirname, 'frontend/src/data');
const files = fs.readdirSync(dataDir).filter(f => f.endsWith('.ts'));

const replacements = [
    // Fluff and Analogies Replacements
    ["死静态", "纯静态"],
    ["一大坨", "大量"],
    ["一坨", "一部分"],
    ["老掉牙", "传统"],
    ["海王模式", "统一"],
    ["海王", "全局"],
    ["接管接驳", "集中接管"],
    ["被打爆", "大并发过载"],
    ["必杀技", "核心机制"],
    ["天生就是", "本身具备"],
    ["大招", "高级特性"],
    ["就地处决", "直接拦截"],
    ["坠毁", "抛出异常"],
    ["纯净得令人心醉", "结构清晰"],
    ["臭长", "冗长"],
    ["保驾护送", "安全传递"],
    ["拿钱", "获取数据"],
    ["浩劫", "漏洞"],
    ["流氓", "恶意"],
    ["偷灌", "注入"],
    ["肆虐", "执行"],
    ["死锁", "固定绑定"],
    ["核聚变", "底层逻辑改变"],
    ["大堂", "系统首页"],
    ["司令塔", "主控视图"],
    ["叫板", "发出请求"],
    ["击溃", "验证获得响应"],
    ["拿回钥匙", "获取令牌"],
    ["收割者", "数据获取流程"],
    ["防线", "安全防范"],
    ["魔术前缀", "授权前缀"],
    ["魔术字", "授权前缀"],
    ["魔术", "特殊机制"],
    ["魔法", "特殊逻辑"],
    ["结界", "隔离保护"],
    ["法阵", "坐标系"],
    ["汪洋大", "庞大的静态"],
    ["汪洋", "静态层"],
    ["大海", "系统"],
    ["岛屿架构", "Islands 架构"],
    ["木乃伊体", "无交互结构"],
    ["注水复苏", "客户端挂载"],
    ["护城河", "防护边界"],
    ["防波堤", "防护层"],
    ["客栈大门", "系统登录页"],
    ["保卫科", "拦截器业务"],
    ["傻瓜组件", "上层组件"],
    ["想象", "假设"],
    ["仿佛", "如同"],
    ["就像", "类似于"],
    ["如同", "类似"],
    ["秘密武器", "核心手段"],
    ["决胜", "重构"],
    ["战场", "场景"],
    ["无穷无尽", "极巨量"],
    ["灾难", "错误"],
    ["塌陷", "布局失效"],
    ["护心防卫锁", "安全拦截器"],
    ["深渊", "底端系统"],
    ["极速", "高性能"],
    ["兵站", "实例"],
    ["护盾", "安全代理"],
    ["死令法则", "必要约定"],
    ["折断", "阻断"],
    ["当空", "执行异出"],
    ["深库", "本地存储深处"],
    ["印封条", "配置属性"],
    ["失忆", "无法从 JS 读取"],
    ["森冷", "严格"],
    ["庞大", "大型化"],
    ["帝国", "系统架构"],
    ["海量", "大量"],
    ["彻底", "完全"],
    ["裸奔的儿童游荡在那荒郊", "极度缺乏安全防护"],
    ["裸奔的儿童", "无防备状态"],
    ["荒郊", "环境"],
    ["踢人", "清除状态"],
    ["被无情回溯", "触发错误回滚"],
    ["无情回溯", "错误回滚"]
];

for (const file of files) {
    const filePath = path.join(dataDir, file);
    let content = fs.readFileSync(filePath, 'utf-8');

    for (const [match, replace] of replacements) {
        const regex = new RegExp(match, 'g');
        content = content.replace(regex, replace);
    }

    fs.writeFileSync(filePath, content, 'utf-8');
    console.log(`Cleaned ${file}`);
}
